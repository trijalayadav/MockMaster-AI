<!DOCTYPE html>
<html>

<head>
    <title>Test Gemini API</title>
</head>

<body>
    <h1>Testing Gemini API</h1>
    <button onclick="listModels()">List Available Models</button>
    <button onclick="testAPI()">Test Models</button>
    <pre id="output"></pre>

    <script type="module">
        async function listModels() {
            const output = document.getElementById('output');
            const apiKey = 'AIzaSyBYTljUM-6cFvq1-iy1MDhqysn8UPECTyY'; // Replace with your API key

            output.textContent = 'Fetching available models...\n\n';

            try {
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models?key=${apiKey}`
                );

                if (response.ok) {
                    const data = await response.json();
                    output.textContent += 'Available models:\n\n';

                    data.models.forEach(model => {
                        const modelName = model.name.replace('models/', '');
                        const supportsMethods = model.supportedGenerationMethods || [];
                        output.textContent += `✓ ${modelName}\n`;
                        output.textContent += `  Methods: ${supportsMethods.join(', ')}\n\n`;
                    });

                    // Find models that support generateContent
                    const validModels = data.models.filter(m =>
                        m.supportedGenerationMethods?.includes('generateContent')
                    );

                    if (validModels.length > 0) {
                        output.textContent += '\n=== MODELS THAT WORK FOR YOUR USE CASE ===\n\n';
                        validModels.forEach(model => {
                            const modelName = model.name.replace('models/', '');
                            output.textContent += `USE THIS: ${modelName}\n`;
                        });
                    }
                } else {
                    const error = await response.json();
                    output.textContent += `Error: ${JSON.stringify(error, null, 2)}`;
                }
            } catch (error) {
                output.textContent += `Error: ${error.message}`;
            }
        }

        async function testAPI() {
            const output = document.getElementById('output');
            const apiKey = 'AIzaSyBYTljUM-6cFvq1-iy1MDhqysn8UPECTyY'; // Replace with your API key

            const models = [
                'gemini-2.5-flash',
                'gemini-2.0-flash',
                'gemini-pro-latest',
                'gemini-2.5-pro',
                'gemini-flash-latest',
                'gemini-2.0-flash-001'
            ];

            output.textContent = 'Testing models...\n\n';

            for (const model of models) {
                try {
                    output.textContent += `Testing ${model}... `;

                    const response = await fetch(
                        `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`,
                        {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                contents: [{
                                    parts: [{
                                        text: 'Say hello'
                                    }]
                                }]
                            })
                        }
                    );

                    if (response.ok) {
                        const data = await response.json();
                        output.textContent += `✓ SUCCESS!\n`;
                        output.textContent += `Response: ${data.candidates[0].content.parts[0].text}\n\n`;
                        output.textContent += `\n\n=== USE THIS MODEL: ${model} ===\n\n`;
                        break;
                    } else {
                        const error = await response.json();
                        output.textContent += `✗ Failed: ${error.error?.message || 'Unknown error'}\n`;
                    }
                } catch (error) {
                    output.textContent += `✗ Error: ${error.message}\n`;
                }
            }
        }

        window.testAPI = testAPI;
        window.listModels = listModels;
    </script>
</body>

</html>